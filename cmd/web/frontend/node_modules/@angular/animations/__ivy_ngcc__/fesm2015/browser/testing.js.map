{"version":3,"file":"testing.js","sources":["../../../../../../packages/animations/browser/testing/src/mock_animation_driver.ts","../../../../../../packages/animations/browser/testing/testing.ts"],"names":["validateStyleProperty","matchesElement","containsElement","invokeQuery","allowPreviousPlayerStylesMerge"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {AUTO_STYLE, AnimationPlayer, NoopAnimationPlayer, ÉµStyleData} from '@angular/animations';\nimport {AnimationDriver, ÉµallowPreviousPlayerStylesMerge as allowPreviousPlayerStylesMerge, ÉµcontainsElement as containsElement, ÉµinvokeQuery as invokeQuery, ÉµmatchesElement as matchesElement, ÉµvalidateStyleProperty as validateStyleProperty} from '@angular/animations/browser';\n\n\n/**\n * @publicApi\n */\nexport class MockAnimationDriver implements AnimationDriver {\n  static log: AnimationPlayer[] = [];\n\n  validateStyleProperty(prop: string): boolean { return validateStyleProperty(prop); }\n\n  matchesElement(element: any, selector: string): boolean {\n    return matchesElement(element, selector);\n  }\n\n  containsElement(elm1: any, elm2: any): boolean { return containsElement(elm1, elm2); }\n\n  query(element: any, selector: string, multi: boolean): any[] {\n    return invokeQuery(element, selector, multi);\n  }\n\n  computeStyle(element: any, prop: string, defaultValue?: string): string {\n    return defaultValue || '';\n  }\n\n  animate(\n      element: any, keyframes: {[key: string]: string | number}[], duration: number, delay: number,\n      easing: string, previousPlayers: any[] = []): MockAnimationPlayer {\n    const player =\n        new MockAnimationPlayer(element, keyframes, duration, delay, easing, previousPlayers);\n    MockAnimationDriver.log.push(<AnimationPlayer>player);\n    return player;\n  }\n}\n\n/**\n * @publicApi\n */\nexport class MockAnimationPlayer extends NoopAnimationPlayer {\n  private __finished = false;\n  private __started = false;\n  public previousStyles: {[key: string]: string | number} = {};\n  private _onInitFns: (() => any)[] = [];\n  public currentSnapshot: ÉµStyleData = {};\n\n  constructor(\n      public element: any, public keyframes: {[key: string]: string | number}[],\n      public duration: number, public delay: number, public easing: string,\n      public previousPlayers: any[]) {\n    super(duration, delay);\n\n    if (allowPreviousPlayerStylesMerge(duration, delay)) {\n      previousPlayers.forEach(player => {\n        if (player instanceof MockAnimationPlayer) {\n          const styles = player.currentSnapshot;\n          Object.keys(styles).forEach(prop => this.previousStyles[prop] = styles[prop]);\n        }\n      });\n    }\n  }\n\n  /* @internal */\n  onInit(fn: () => any) { this._onInitFns.push(fn); }\n\n  /* @internal */\n  init() {\n    super.init();\n    this._onInitFns.forEach(fn => fn());\n    this._onInitFns = [];\n  }\n\n  finish(): void {\n    super.finish();\n    this.__finished = true;\n  }\n\n  destroy(): void {\n    super.destroy();\n    this.__finished = true;\n  }\n\n  /* @internal */\n  triggerMicrotask() {}\n\n  play(): void {\n    super.play();\n    this.__started = true;\n  }\n\n  hasStarted() { return this.__started; }\n\n  beforeDestroy() {\n    const captures: ÉµStyleData = {};\n\n    Object.keys(this.previousStyles).forEach(prop => {\n      captures[prop] = this.previousStyles[prop];\n    });\n\n    if (this.hasStarted()) {\n      // when assembling the captured styles, it's important that\n      // we build the keyframe styles in the following order:\n      // {other styles within keyframes, ... previousStyles }\n      this.keyframes.forEach(kf => {\n        Object.keys(kf).forEach(prop => {\n          if (prop != 'offset') {\n            captures[prop] = this.__finished ? kf[prop] : AUTO_STYLE;\n          }\n        });\n      });\n    }\n\n    this.currentSnapshot = captures;\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}